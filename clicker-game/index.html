<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Monster Rush: Skill Master</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=DotGothic16&display=swap"
        rel="stylesheet">
</head>

<body>
    <div id="game-container">
        <!-- Header / Status -->
        <header>
            <div class="status-bar">
                <div class="level-info">レベル <span id="player-level">1</span></div>
                <div class="xp-bar-container">
                    <div id="xp-bar-fill" class="xp-bar-fill"></div>
                    <span id="xp-text">0 / 10</span>
                </div>
            </div>
            <div class="resources">
                <div class="gold">💰 <span id="player-gold">0</span></div>
                <div class="dps">⚔️ 自動ダメ: <span id="player-dps">0</span>/秒</div>
            </div>
        </header>

        <!-- Battle Arena -->
        <main id="arena">
            <div class="monster-container">
                <div class="hp-bar-container">
                    <div id="hp-bar-fill" class="hp-bar-fill"></div>
                </div>
                <div class="monster-name" id="monster-name">スライム</div>
                <div class="monster-visual">
                    <img id="monster-img" src="monster_slime_dark_final.png" alt="Monster" draggable="false">
                    <div id="damage-overlay"></div>
                </div>
            </div>
        </main>

        <!-- Stats / Controls -->
        <footer id="controls">
            <div class="stat-box">
                DPS: <span id="player-dps">0</span>
            </div>
            <div class="stat-box">
                ATK: <span id="player-attack">1</span> (<span id="player-crit">5</span>%)
            </div>
            <div class="controls">
                <button id="ranking-btn" class="retro-btn">🏆 ランク</button>
                <button id="save-btn" class="retro-btn">💾 セーブ</button>
                <button id="mute-btn" class="retro-btn">🔊 ON</button>
            </div>
            <button id="shop-btn" class="retro-btn">ショップ (準備中)</button>
        </footer>

        <!-- Skill Selection Modal -->
        <div id="skill-modal" class="hidden">
            <div class="modal-content">
                <h2>レベルアップ！</h2>
                <p>スキルを選んでください</p>
                <div id="skill-cards-container" class="cards-container">
                    <!-- Cards injected by JS -->
                </div>

                <div class="reroll-container" style="margin-top: 20px;">
                    <button id="reroll-btn" class="retro-btn">スキルを再抽選 (残り: <span id="reroll-count">3</span>)</button>
                </div>
            </div>
            <!-- Fake Ad Overlay -->
            <div id="ad-overlay" class="hidden">
                <div class="ad-content">
                    <h3>広告再生中...</h3>
                    <p>素晴らしいプロダクトを紹介しています</p>
                    <div class="loader"></div>
                    <p id="ad-timer">5</p>
                </div>
            </div>
        </div>

        <!-- Shop Modal -->
        <div id="shop-modal" class="hidden">
            <div class="modal-content">
                <h2>闇の商人</h2>
                <p>ゴールドを使って禁断の知識を解放せよ...</p>
                <div id="shop-items-container" class="cards-container">
                    <!-- Items injected by JS -->
                </div>
                <button id="close-shop-btn" class="retro-btn" style="margin-top: 20px;">閉じる</button>
            </div>
        </div>

        <!-- Ranking Modal -->
        <div id="ranking-modal" class="hidden">
            <div class="modal-content">
                <h2>🏆 RANKING 🏆</h2>
                <div id="ranking-list" class="ranking-list">
                    <!-- Javascript will populate this -->
                </div>
                <button class="retro-btn close-btn" id="close-ranking-btn">閉じる</button>
            </div>
        </div>
    </div>

    <script src="skills.js"></script>
    <script src="audio.js"></script>
    <script src="script.js"></script>
</body>

</html>